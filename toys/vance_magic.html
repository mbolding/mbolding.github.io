<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vancian Wizard Duel</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .game-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
        }
        .wizard {
            margin-bottom: 20px;
        }
        .spells {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        .spells button {
            padding: 5px 10px;
            flex-grow: 1;
        }
        #gameLog {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Vancian Wizard Duel</h1>
        <div class="wizard" id="wizard1">
            <h2>Wizard 1</h2>
            <p>Health: <span id="health1">20</span></p>
            <p>Mana: <span id="mana1">10</span></p>
            <div class="spells" id="spells1"></div>
        </div>
        <div class="wizard" id="wizard2">
            <h2>Wizard 2</h2>
            <p>Health: <span id="health2">20</span></p>
            <p>Mana: <span id="mana2">10</span></p>
            <div class="spells" id="spells2"></div>
        </div>
        <div id="gameLog"></div>
    </div>

    <script>
        const spells = [
            { name: 'Felojun\'s Second Hypnotic Spell', manaCost: 3, effect: (caster, target) => dealDamage(target, 4) },
            { name: 'Phandaal\'s Gyrator of Healing', manaCost: 2, effect: (caster, target) => heal(caster, 3) },
            { name: 'The Excellent Prismatic Spray', manaCost: 2, effect: (caster, target) => { shield[caster - 1] = true; log(`Wizard ${caster} is shielded from the next spell.`); } },
            { name: 'Spell of the Macroid Toe', manaCost: 3, effect: (caster, target) => { dealDamage(target, 2); heal(caster, 2); } },
            { name: 'Call to the Violent Cloud', manaCost: 4, effect: (caster, target) => dealDamage(target, Math.floor(Math.random() * 6) + 1) },
            { name: 'Thasdrubel\'s Laganetic Transfer', manaCost: 0, effect: (caster, target) => { mana[caster - 1] += 3; log(`Wizard ${caster} gains 3 mana.`); } },
            { name: 'The Spell of Forlorn Encystment', manaCost: 5, effect: (caster, target) => dealDamage(target, 6) },
            { name: 'Azvan\'s Vade Mecum of Planar Travel', manaCost: 4, effect: (caster, target) => { const damage = Math.floor(Math.random() * 3) + 1; dealDamage(target, damage); heal(caster, damage); } },
            { name: 'The Cascading Luminescence', manaCost: 1, effect: (caster, target) => dealDamage(target, 2) },
            { name: 'Turjan\'s Spell of Instant Transposition', manaCost: 3, effect: (caster, target) => { dealDamage(target, 3); mana[target - 1] = Math.max(0, mana[target - 1] - 2); log(`Wizard ${target} loses 2 mana.`); } }
        ];

        let currentTurn = 1;
        let health = [20, 20];
        let mana = [10, 10];
        let shield = [false, false];

        function initializeGame() {
            for (let i = 1; i <= 2; i++) {
                const spellContainer = document.getElementById(`spells${i}`);
                spells.forEach(spell => {
                    const button = document.createElement('button');
                    button.textContent = `${spell.name} (${spell.manaCost})`;
                    button.onclick = () => castSpell(i, spell);
                    spellContainer.appendChild(button);
                });
            }
            log('The duel of arcane mastery begins! Wizard 1 takes the first action.');
        }

        function castSpell(wizard, spell) {
            if (wizard !== currentTurn) {
                log(`Patience! It is not yet time for Wizard ${wizard} to act.`);
                return;
            }

            if (mana[wizard - 1] < spell.manaCost) {
                log(`Alas! Wizard ${wizard}'s mana is insufficient to invoke ${spell.name}!`);
                return;
            }

            mana[wizard - 1] -= spell.manaCost;

            const roll = Math.floor(Math.random() * 6) + 1;
            const success = roll >= 4;

            log(`Wizard ${wizard} intones the syllables of ${spell.name}. The die of fate shows: ${roll} (${success ? 'The spell manifests!' : 'The magic fizzles...'})`);

            if (success) {
                spell.effect(wizard, 3 - wizard);
            }

            currentTurn = 3 - currentTurn; // Switch turns (1 -> 2, 2 -> 1)
            updateStats();
            
            // Replenish 1 mana at the end of the turn
            mana[wizard - 1] = Math.min(mana[wizard - 1] + 1, 10);
        }

        function dealDamage(target, amount) {
            if (shield[target - 1]) {
                log(`The magical barrier surrounding Wizard ${target} shimmers and absorbs the spell!`);
                shield[target - 1] = false;
            } else {
                health[target - 1] -= amount;
                log(`Wizard ${target} reels as ${amount} points of vital essence are stripped away.`);
                if (health[target - 1] <= 0) {
                    log(`Wizard ${target} collapses, defeated! Wizard ${3 - target} stands triumphant!`);
                    disableSpells();
                }
            }
        }

        function heal(wizard, amount) {
            health[wizard - 1] = Math.min(health[wizard - 1] + amount, 20);
            log(`A warm glow envelops Wizard ${wizard}, restoring ${amount} points of vitality.`);
        }

        function updateStats() {
            for (let i = 1; i <= 2; i++) {
                document.getElementById(`health${i}`).textContent = Math.max(health[i-1], 0);
                document.getElementById(`mana${i}`).textContent = mana[i-1];
            }
        }

        function log(message) {
            const gameLog = document.getElementById('gameLog');
            gameLog.innerHTML += message + '<br>';
            gameLog.scrollTop = gameLog.scrollHeight;
        }

        function disableSpells() {
            const buttons = document.querySelectorAll('.spells button');
            buttons.forEach(button => button.disabled = true);
        }

        initializeGame();
    </script>
</body>
</html>


